/************************************************
*
* const cidar = require('cidar')
* const cid = await cidar.file(Buffer.from("hello world"))
*
************************************************/
const { importer } = require('ipfs-unixfs-importer')
const block = {
  get: async cid => { throw new Error(`unexpected block API get for ${cid}`) },
  put: async () => { throw new Error('unexpected block API put') }
}
const file = async (content) => {
  let lastCid
  for await (const { cid } of importer([{ content }], block, { onlyHash: true, cidVersion: 1, rawLeaves: true, })) {
    lastCid = cid
  }
  return `${lastCid}`
}
module.exports = { file }
